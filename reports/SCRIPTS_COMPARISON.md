# –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤ PL / DE / RO

**–î–∞—Ç–∞:** 05.11.2025

## ‚úÖ –û–±—â–∞—è –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

**–î–∞, –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å–∫—Ä–∏–ø—Ç–æ–≤ –¥–ª—è –≤—Å–µ—Ö —Ç—Ä—ë—Ö –ª–æ–∫–∞–ª–µ–π –û–î–ò–ù–ê–ö–û–í–ê–Ø!**

–í—Å–µ —Ç—Ä–∏ —Å–∫—Ä–∏–ø—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç:
- ‚úÖ **–û–¥–∏–Ω–∞–∫–æ–≤—É—é –≤–µ—Ä—Å–∏—é:** v15 (—Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏ v16)
- ‚úÖ **–û–¥–∏–Ω–∞–∫–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç:** `content_ids: [variantId]` (—Ç–æ–ª—å–∫–æ variant_id)
- ‚úÖ **–û–¥–∏–Ω–∞–∫–æ–≤—ã–µ —Å–æ–±—ã—Ç–∏—è:** ViewContent, AddToCart, InitiateCheckout, Purchase
- ‚úÖ **–û–¥–∏–Ω–∞–∫–æ–≤—É—é fallback –ª–æ–≥–∏–∫—É:** –µ—Å–ª–∏ variant –Ω–µ –Ω–∞–π–¥–µ–Ω ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è group
- ‚úÖ **–û–¥–∏–Ω–∞–∫–æ–≤—ã–π popup checkout fix:** —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π snapshot + localStorage backup
- ‚úÖ **–û–¥–∏–Ω–∞–∫–æ–≤—ã–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã:** tstore-cart-add, submit, DOM-–¥–µ—Ç–µ–∫—Ç, tstore-checkout-success

## üîÑ –†–∞–∑–ª–∏—á–∏—è –º–µ–∂–¥—É —Å–∫—Ä–∏–ø—Ç–∞–º–∏

–°–∫—Ä–∏–ø—Ç—ã –æ—Ç–ª–∏—á–∞—é—Ç—Å—è –¢–û–õ–¨–ö–û:

### 1. –í–∞–ª—é—Ç–∞ (CURRENCY)
| –õ–æ–∫–∞–ª—å | –í–∞–ª—é—Ç–∞ | Pixel ID |
|--------|--------|----------|
| üáµüá± PL | PLN | 1282270847279518 |
| üá©üá™ DE | EUR | 2111821816340904 |
| üá∑üá¥ RO | RON | 1901060767290355 |

### 2. Mapping (productCatalogMapping)
| –õ–æ–∫–∞–ª—å | Parents | Variants | –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ |
|--------|---------|----------|--------------|
| üáµüá± PL | 65 | 109 | 25 KB |
| üá©üá™ DE | 51 | 80 | 20 KB |
| üá∑üá¥ RO | 65 | 108 | 22 KB |

**–í–∞–∂–Ω–æ:** –ö–∞–∂–¥—ã–π —Å–∞–π—Ç –∏–º–µ–µ—Ç –°–í–û–ò —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ Tilda UID!  
External ID –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ, –Ω–æ Tilda UID —Ä–∞–∑–Ω—ã–µ –¥–ª—è –∫–∞–∂–¥–æ–π –ª–æ–∫–∞–ª–∏.

### 3. –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –∫–Ω–æ–ø–æ–∫ (button detection)

–í—Å–µ —Å–∫—Ä–∏–ø—Ç—ã —Å–æ–¥–µ—Ä–∂–∞—Ç –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –¥–ª—è –í–°–ï–• —è–∑—ã–∫–æ–≤ (–¥–ª—è —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç–∏):

**PL —Å–∫—Ä–∏–ø—Ç:**
- üáµüá± `dodaj`, `kosz`
- üá©üá™ `warenkorb`
- üá∑üá¥ `adaug`, `co»ô`, `cos`
- üåç `cart`

**DE —Å–∫—Ä–∏–ø—Ç:**
- üá©üá™ `warenkorb`, `in den`
- üáµüá± `dodaj`, `kosz`
- üá∑üá¥ `adaug`, `co»ô`
- üåç `cart`

**RO —Å–∫—Ä–∏–ø—Ç:**
- üá∑üá¥ `adaug`, `co»ô`, `cos`
- üáµüá± `dodaj`, `kosz`
- üá©üá™ `warenkorb`
- üåç `cart`

## üìã –ï–¥–∏–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞

```javascript
// 1. –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã (–æ—Ç–ª–∏—á–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ CURRENCY)
var CURRENCY = 'PLN' / 'EUR' / 'RON';

// 2. Mapping (–æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–∞–π—Ç–∞)
window.productCatalogMapping = { ... };

// 3. Helpers (–û–î–ò–ù–ê–ö–û–í–´–ï)
function getProductData(productElement) { ... }
function snapshotCartFromTilda() { ... }
function sendPurchaseEvent(cartData) { ... }

// 4. –°–æ–±—ã—Ç–∏—è (–û–î–ò–ù–ê–ö–û–í–´–ï)
- ViewContent (—Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç–æ–≤–∞—Ä–∞ + —Å–º–µ–Ω–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞)
- AddToCart (tstore-cart-add + –∫–ª–∏–∫)
- InitiateCheckout (DOM-–¥–µ—Ç–µ–∫—Ç + –∫–ª–∏–∫)
- Purchase (submit + success + thankyou)

// 5. Format content_ids (–û–î–ò–ù–ê–ö–û–í–´–ô v16)
content_ids: [productData.variant_id]  // —Ç–æ–ª—å–∫–æ variant_id
```

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –µ–¥–∏–Ω–æ–π –ª–æ–≥–∏–∫–∏

1. **–õ–µ–≥–∫–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å** ‚Äî –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫–æ –≤—Å–µ–º –ª–æ–∫–∞–ª—è–º
2. **–û–¥–∏–Ω–∞–∫–æ–≤–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ** ‚Äî –≤—Å–µ —Å–∞–π—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–Ω–∏ –∏ —Ç–µ –∂–µ —Ñ–∏–∫—Å—ã
3. **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ –∫–Ω–æ–ø–∫–∏** ‚Äî —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞ –≤—Å–µ—Ö —è–∑—ã–∫–∞—Ö
4. **–ü—Ä–æ—Å—Ç–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî –ø—Ä–æ–≤–µ—Ä—è–µ–º –æ–¥–∏–Ω —Ä–∞–∑, –ø—Ä–∏–º–µ–Ω—è–µ–º –≤–µ–∑–¥–µ

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

–ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ–±–Ω–æ–≤–∏—Ç—å –ª–æ–≥–∏–∫—É:

1. –í–Ω–µ—Å—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ª—é–±–æ–π —Å–∫—Ä–∏–ø—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, PL)
2. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω—ë–Ω–Ω—É—é –ª–æ–≥–∏–∫—É –≤ DE –∏ RO
3. –û—Å—Ç–∞–≤–∏—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ —Ç–æ–ª—å–∫–æ:
   - –í–∞–ª—é—Ç—É (CURRENCY)
   - Mapping (productCatalogMapping)
   - –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≤ header —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º —Å–∞–π—Ç–∞

## üìù –í—ã–≤–æ–¥—ã

‚úÖ **–õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã –ü–û–õ–ù–û–°–¢–¨–Æ –æ–¥–∏–Ω–∞–∫–æ–≤–∞—è**  
‚úÖ **Format content_ids –û–î–ò–ù–ê–ö–û–í–´–ô** (v16: —Ç–æ–ª—å–∫–æ variant_id)  
‚úÖ **–†–∞–∑–ª–∏—á–∏—è –¢–û–õ–¨–ö–û** –≤ –≤–∞–ª—é—Ç–µ –∏ mapping  
‚úÖ **–í—Å–µ —Å–∫—Ä–∏–ø—Ç—ã production-ready**

---

**–í–µ—Ä—Å–∏—è:** v15 (—Å —Ñ–æ—Ä–º–∞—Ç–æ–º v16)  
**–°—Ç–∞—Ç—É—Å:** –í—Å–µ —Ç—Ä–∏ –ª–æ–∫–∞–ª–∏ –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
